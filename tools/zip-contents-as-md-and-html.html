<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>
	<textarea id="input" cols="80"></textarea>
	<button id="parse">Parse above zip input</button>
	<hr>
	<div style="display: flex">
		<div><p>Markdown:</p><textarea id="markdown"></textarea></div>
		<div><p>HTML:</p><textarea id="html"></textarea></div>
	</div>
	<script>
		let parse_button = document.getElementById('parse');
		let markdown_ele = document.getElementById('markdown');
		let html_ele = document.getElementById('html');

		parse_button.addEventListener(function(e) {
			let zip_input = document.getElementById('input');

			if (!zip_input) return;

			let input = String(zip_input.value).trim();

			// Trim directories
			let parsed_lines = input
				.split('\n')
				.filter(line => !line.includes('(stored 0%)'))
				.map(line => line.replace(/^\s*adding: build\//, '').replace(/ \(deflated \d+%\)$/, ''));

			let html = parsed_lines.map(line => `<li>${line}</li>`);

			markdown_ele.innerHTML = 'Files Changed:\n```' + parsed_lines.join('\n') + '\n```';
			html_ele.innerHTML = '<p>Files Changed:</p>\n<ul>\n' + html.join('\n') + '\n</ul>';
		});

	</script>
</body>
</html>
